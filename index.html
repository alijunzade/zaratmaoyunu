<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Helvetica; color: #181818; -webkit-text-stroke: #181818}
    p.p2 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Helvetica; color: #181818; -webkit-text-stroke: #181818; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="tr"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;title&gt;Boyama SavaÅŸlarÄ±: Global Risk&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>@import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&amp;display=swap');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>:root {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>--bg-ocean: #2c3e50;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>--p1-color: #ff7675; /* Pastel KÄ±rmÄ±zÄ± */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>--p2-color: #74b9ff; /* Pastel Mavi */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>--panel-bg: rgba(255, 255, 255, 0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>margin: 0; overflow: hidden; font-family: 'Fredoka', sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>background: linear-gradient(135deg, #1e272e 0%, #485460 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>display: flex; flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>height: 100vh; user-select: none; touch-action: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* --- ÃœST GÃœÃ‡ BARI --- */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#tugOfWarBar {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>width: 100%; height: 24px; display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 50; background: #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#barP1 { height: 100%; background: var(--p1-color); width: 50%; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); display: flex; align-items: center; justify-content: flex-start; padding-left: 10px; color: white; font-size: 11px; white-space: nowrap; overflow: hidden; font-weight:bold;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#barP2 { height: 100%; background: var(--p2-color); width: 50%; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: #333; font-size: 11px; white-space: nowrap; overflow: hidden; font-weight:bold;}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* --- OYUN ALANI --- */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#gameLayout {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>display: flex; gap: 15px; align-items: center; justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>flex-grow: 1; padding: 15px; width: 100%; box-sizing: border-box;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#canvasWrapper {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>flex-grow: 1; height: 100%; background: #81ecec; /* Okyanus Rengi */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>position: relative; overflow: hidden; border: 6px solid #fff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 14px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#uiCanvas { cursor: crosshair; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* --- SAÄ PANEL --- */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#sidePanel {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>width: 320px; display: flex; flex-direction: column; gap: 10px; height: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.info-card {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>background: var(--panel-bg); padding: 10px 15px; border-radius: 15px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: transform 0.2s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>border-left: 6px solid #ddd; position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.player-card.active { transform: scale(1.02); border-color: gold !important; box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.card-content { display: flex; align-items: center; gap: 10px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.flag { font-size: 26px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.stats h3 { margin: 0; font-size: 15px; color: #2d3436; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.stats p { margin: 0; font-size: 13px; color: #636e72; font-weight: bold; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.limit-bar-bg { width: 100%; height: 6px; background: #eee; border-radius: 3px; margin-top: 5px; overflow: hidden; border:1px solid #ccc;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.limit-bar-fill { height: 100%; width: 0%; background: #00b894; transition: width 0.1s; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#turnBadge {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>background: #6c5ce7; color: white; text-align: center; padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>border-radius: 12px; font-size: 15px; box-shadow: 0 4px 0 rgba(0,0,0,0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* SONUÃ‡ KUTUSU */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#lastResultBox {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>background: white; padding: 10px; border-radius: 15px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>text-align: center; font-size: 13px; color: #555;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>min-height: 50px; display: flex; align-items: center; justify-content: center; flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box-shadow: inset 0 0 10px rgba(0,0,0,0.05); border: 2px dashed #ccc;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>transition: all 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#lastResultBox b { font-size: 16px; display: block; margin-bottom: 2px;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#lastResultBox.win { background: #dff9fb; border-color: #00b894; color: #009432; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#lastResultBox.lose { background: #ffcccc; border-color: #d63031; color: #d63031; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* ZAR ALANI */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#actionArea { margin-top: auto; text-align: center; position: relative; height: 130px; }</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.dice-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>position: absolute; top: -30px; left: 50%; transform: translateX(-50%) scale(1.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>perspective: 1000px; width: 60px; height: 60px; z-index: 10;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.dice-box { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.dice-face {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>position: absolute; width: 100%; height: 100%; background: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>border: 2px solid #b2bec3; border-radius: 10px; display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>justify-content: center; align-items: center; font-size: 24px; font-weight: bold;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box-shadow: inset 0 0 8px rgba(0,0,0,0.1); color: #2d3436;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.df1 { transform: translateZ(30px); } .df2 { transform: rotateY(180deg) translateZ(30px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.df3 { transform: rotateY(90deg) translateZ(30px); } .df4 { transform: rotateY(-90deg) translateZ(30px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.df5 { transform: rotateX(90deg) translateZ(30px); } .df6 { transform: rotateX(-90deg) translateZ(30px); }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#rollBtn {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>border: none; border-radius: 15px; background: #dfe6e9; color: #636e72;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>font-size: 16px; font-weight: bold; cursor: not-allowed; transition: all 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#rollBtn.ready { background: #0984e3; color: white; cursor: pointer; box-shadow: 0 6px 0 #074f83; animation: pulseBtn 1s infinite; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#rollBtn:active { transform: translateY(4px); box-shadow: 0 2px 0 #074f83; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>/* MODALS */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.modal-overlay {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>position: fixed; top: 0; left: 0; width: 100%; height: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>display: flex; justify-content: center; align-items: center; z-index: 100;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>opacity: 0; pointer-events: none; transition: opacity 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.modal-overlay.active { opacity: 1; pointer-events: all; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.modal-card { background: white; padding: 30px; border-radius: 30px; text-align: center; max-width: 500px; width: 90%; transform: scale(0.8); transition: transform 0.3s; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.modal-overlay.active .modal-card { transform: scale(1); }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.setup-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.player-select { background: #f8f9fa; padding: 15px; border-radius: 15px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.primary-btn { background: linear-gradient(45deg, #0984e3, #74b9ff); color: white; border: none; padding: 12px 40px; font-size: 18px; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(9, 132, 227, 0.4); }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.rules-box { text-align:left; font-size:13px; color:#555; background:#f1f2f6; padding:15px; border-radius:10px; margin-bottom:20px; line-height: 1.6; border: 1px solid #ddd; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.rule-row { display: flex; justify-content: space-between; border-bottom: 1px solid #ddd; padding: 3px 0; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.rule-win { color: #009432; font-weight: bold; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.rule-lose { color: #d63031; font-weight: bold; }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>@keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>@media (max-width: 768px) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>#gameLayout { flex-direction: column; height: auto; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>#sidePanel { width: 100%; height: auto; flex-direction: column; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>#actionArea { height: 100px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>.dice-container { top: -20px; transform: translateX(-50%) scale(1.2); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="setupModal" class="modal-overlay active"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="modal-card"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h1 style="color:#2c3e50; margin:0;"&gt;ğŸŒ Boyama SavaÅŸlarÄ±&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p style="color:#7f8c8d;"&gt;Risk ve Strateji&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="setup-grid"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="player-select" style="border: 2px solid var(--p1-color);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 style="margin:0; color:#ff6b6b"&gt;Oyuncu 1&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size:40px; margin:10px 0;" id="p1FlagPreview"&gt;â“&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;select id="p1Select" onchange="updatePreview('p1')" style="width:100%"&gt;&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="player-select" style="border: 2px solid var(--p2-color);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 style="margin:0; color:#48dbfb"&gt;Oyuncu 2&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size:40px; margin:10px 0;" id="p2FlagPreview"&gt;â“&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;select id="p2Select" onchange="updatePreview('p2')" style="width:100%"&gt;&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="rules-box"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="margin-bottom:5px; text-align:center;"&gt;&lt;b&gt;ğŸ² ZAR SONUÃ‡LARI&lt;/b&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;1ï¸âƒ£&lt;/span&gt; &lt;span class="rule-win"&gt;Tam Kazan (SeÃ§tiÄŸini Al)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;2ï¸âƒ£&lt;/span&gt; &lt;span class="rule-lose"&gt;Tam Kaybet (SeÃ§tiÄŸin Silinir)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;3ï¸âƒ£&lt;/span&gt; &lt;span class="rule-win"&gt;ğŸ”¥ 2 KAT KAZAN (BÃ¼yÃ¼r)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;4ï¸âƒ£&lt;/span&gt; &lt;span class="rule-lose"&gt;ğŸ’€ 2 KAT KAYBET (BÃ¼yÃ¼yÃ¼p Silinir)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;5ï¸âƒ£&lt;/span&gt; &lt;span class="rule-win"&gt;Â½ YarÄ±m Kazan (KÃ¼Ã§Ã¼lÃ¼r)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="rule-row"&gt;&lt;span&gt;6ï¸âƒ£&lt;/span&gt; &lt;span class="rule-lose"&gt;Â½ YarÄ±m Kaybet (KÃ¼Ã§Ã¼lÃ¼p Silinir)&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button class="primary-btn" onclick="finishSetup()"&gt;BAÅLAT ğŸš€&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="tugOfWarBar"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="barP1"&gt;P1 %50&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="barCenter"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="barP2"&gt;P2 %50&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;div id="gameLayout"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="canvasWrapper"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;canvas id="bgCanvas"&gt;&lt;/canvas&gt; &lt;canvas id="mapCanvas"&gt;&lt;/canvas&gt; &lt;canvas id="uiCanvas"&gt;&lt;/canvas&gt; &lt;canvas id="fxCanvas" style="pointer-events: none;"&gt;&lt;/canvas&gt; &lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="sidePanel"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="turnBadge"&gt;SÄ±ra: Bekleniyor&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="p1Card" class="info-card player-card active" style="border-color: var(--p1-color);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="card-content"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flag" id="p1FlagDisp"&gt;ğŸ³ï¸&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="stats" style="flex-grow:1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 id="p1NameDisp"&gt;Oyuncu 1&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p id="p1Score"&gt;---&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="limit-bar-bg"&gt;&lt;div id="p1LimitBar" class="limit-bar-fill"&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="p2Card" class="info-card player-card" style="border-color: var(--p2-color);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="card-content"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flag" id="p2FlagDisp"&gt;ğŸ³ï¸&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="stats" style="flex-grow:1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 id="p2NameDisp"&gt;Oyuncu 2&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p id="p2Score"&gt;---&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="limit-bar-bg"&gt;&lt;div id="p2LimitBar" class="limit-bar-fill"&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="lastResultBox"&gt;SavaÅŸ baÅŸlÄ±yor...&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="actionArea"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-box" id="gameDice"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df1"&gt;1&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df2"&gt;2&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df3"&gt;3&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df4"&gt;4&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df5"&gt;5&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dice-face df6"&gt;6&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="rollBtn"&gt;Ã–NCE ALAN Ã‡Ä°Z ğŸ–Œï¸&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1">// --- VERÄ° ---</span></p>
<p class="p1"><span class="s1">const COUNTRIES = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'TR', name: 'TÃ¼rkiye', flag: 'ğŸ‡¹ğŸ‡·' }, { code: 'AZ', name: 'Azerbaycan', flag: 'ğŸ‡¦ğŸ‡¿' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'US', name: 'ABD', flag: 'ğŸ‡ºğŸ‡¸' }, { code: 'DE', name: 'Almanya', flag: 'ğŸ‡©ğŸ‡ª' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'JP', name: 'Japonya', flag: 'ğŸ‡¯ğŸ‡µ' }, { code: 'KR', name: 'GÃ¼ney Kore', flag: 'ğŸ‡°ğŸ‡·' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'BR', name: 'Brezilya', flag: 'ğŸ‡§ğŸ‡·' }, { code: 'RU', name: 'Rusya', flag: 'ğŸ‡·ğŸ‡º' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'CN', name: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³' }, { code: 'FR', name: 'Fransa', flag: 'ğŸ‡«ğŸ‡·' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'IN', name: 'Hindistan', flag: 'ğŸ‡®ğŸ‡³' }, { code: 'GB', name: 'Ä°ngiltere', flag: 'ğŸ‡¬ğŸ‡§' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'IT', name: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹' }, { code: 'ES', name: 'Ä°spanya', flag: 'ğŸ‡ªğŸ‡¸' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>{ code: 'MX', name: 'Meksika', flag: 'ğŸ‡²ğŸ‡½' }, { code: 'CA', name: 'Kanada', flag: 'ğŸ‡¨ğŸ‡¦' }</span></p>
<p class="p1"><span class="s1">];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">const p1Sel = document.getElementById('p1Select');</span></p>
<p class="p1"><span class="s1">const p2Sel = document.getElementById('p2Select');</span></p>
<p class="p1"><span class="s1">COUNTRIES.forEach((c, i) =&gt; { p1Sel.add(new Option(c.name, i)); p2Sel.add(new Option(c.name, i)); });</span></p>
<p class="p1"><span class="s1">p1Sel.selectedIndex = 0; p2Sel.selectedIndex = 1;</span></p>
<p class="p1"><span class="s1">updatePreview('p1'); updatePreview('p2');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function updatePreview(p) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const idx = document.getElementById(p+'Select').value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById(p+'FlagPreview').innerText = COUNTRIES[idx].flag;</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">let player1 = {}, player2 = {};</span></p>
<p class="p1"><span class="s1">let gameState = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>started: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>readyToPlay: false, // BUG FIX: BaÅŸlangÄ±Ã§ta game over olmasÄ±n</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>turn: 'p1',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>isDrawing: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>pathPoints: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canRoll: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>isRolling: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>scores: { p1: 100000, p2: 100000 }, // BaÅŸlangÄ±Ã§ta yÃ¼ksek deÄŸer (gÃ¼venli)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>limitRatio: 1.0 // TAM Kendi alanÄ± kadar</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- SES SÄ°STEMÄ° (Sweet Sounds) ---</span></p>
<p class="p1"><span class="s1">const audioCtx = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1">function playTone(freq, type, duration, delay=0, vol=0.1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(audioCtx.state==='suspended') audioCtx.resume();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const o = audioCtx.createOscillator(); const g = audioCtx.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>o.type=type; o.frequency.setValueAtTime(freq, audioCtx.currentTime+delay);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>g.gain.setValueAtTime(0, audioCtx.currentTime+delay);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>g.gain.linearRampToValueAtTime(vol, audioCtx.currentTime+delay+0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime+delay+duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>o.connect(g); g.connect(audioCtx.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>o.start(audioCtx.currentTime+delay); o.stop(audioCtx.currentTime+delay+duration);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function playSound(ev) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='draw') playTone(400+Math.random()*200, 'sine', 0.05, 0, 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='tick') playTone(800, 'square', 0.02, 0, 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='ready') playTone(1000, 'sine', 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='win') { playTone(523.25, 'sine', 0.3, 0, 0.2); playTone(659.25, 'sine', 0.3, 0.1, 0.2); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='winBig') { playTone(523.25, 'triangle', 0.3, 0, 0.2); playTone(1046.50, 'triangle', 0.5, 0.2, 0.2); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='lose') { playTone(400, 'sine', 0.3, 0, 0.2); playTone(300, 'sine', 0.5, 0.1, 0.2); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='loseBig') { playTone(300, 'sawtooth', 0.4, 0, 0.1); playTone(150, 'sawtooth', 0.6, 0.2, 0.1); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='start') { playTone(600, 'sine', 0.5); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(ev==='limit') { playTone(200, 'sawtooth', 0.1); }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- CANVAS SETUP ---</span></p>
<p class="p1"><span class="s1">const bgCanvas = document.getElementById('bgCanvas');</span></p>
<p class="p1"><span class="s1">const mapCanvas = document.getElementById('mapCanvas');</span></p>
<p class="p1"><span class="s1">const uiCanvas = document.getElementById('uiCanvas');</span></p>
<p class="p1"><span class="s1">const fxCanvas = document.getElementById('fxCanvas');</span></p>
<p class="p1"><span class="s1">const ctxBg = bgCanvas.getContext('2d');</span></p>
<p class="p1"><span class="s1">const ctxMap = mapCanvas.getContext('2d', { willReadFrequently: true });</span></p>
<p class="p1"><span class="s1">const ctxUi = uiCanvas.getContext('2d');</span></p>
<p class="p1"><span class="s1">const ctxFx = fxCanvas.getContext('2d');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function finishSetup() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const idx1 = p1Sel.value; const idx2 = p2Sel.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>player1 = { ...COUNTRIES[idx1], color: '#ff7675' };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>player2 = { ...COUNTRIES[idx2], color: '#74b9ff' };</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p1NameDisp').innerText = player1.name;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p1FlagDisp').innerText = player1.flag;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p2NameDisp').innerText = player2.name;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p2FlagDisp').innerText = player2.flag;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('setupModal').classList.remove('active');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.started = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>resize();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// SAFE INIT: Harita oturduktan sonra puan hesapla</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setTimeout(() =&gt; {<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>drawInitialAreas();<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateScores();<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState.readyToPlay = true;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}, 300);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}, 100);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>updateTurnIndicator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>playSound('start');</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function resize() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const w = document.getElementById('canvasWrapper');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>[bgCanvas, mapCanvas, uiCanvas, fxCanvas].forEach(c =&gt; { c.width = w.clientWidth; c.height = w.clientHeight; });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(gameState.started) { drawWorldMap(); drawInitialAreas(); }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">window.addEventListener('resize', resize);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function drawWorldMap() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxBg.clearRect(0,0,bgCanvas.width, bgCanvas.height);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Grid</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxBg.strokeStyle = 'rgba(255,255,255,0.1)'; ctxBg.lineWidth=1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0; i&lt;bgCanvas.width; i+=60) { ctxBg.beginPath(); ctxBg.moveTo(i,0); ctxBg.lineTo(i,bgCanvas.height); ctxBg.stroke(); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0; i&lt;bgCanvas.height; i+=60) { ctxBg.beginPath(); ctxBg.moveTo(0,i); ctxBg.lineTo(bgCanvas.width,i); ctxBg.stroke(); }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// KÄ±talar (YeÅŸil Alanlar)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxBg.fillStyle = '#badc58'; // Kara</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const lands = [{x:0.2,y:0.3,r:90}, {x:0.7,y:0.3,r:100}, {x:0.6,y:0.7,r:80}, {x:0.25,y:0.65,r:70}];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>lands.forEach(l =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let cx = l.x*bgCanvas.width; let cy=l.y*bgCanvas.height;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(Math.hypot(cx,cy-bgCanvas.height)&lt;250 || Math.hypot(cx-bgCanvas.width, cy)&lt;250) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxBg.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>for(let a=0; a&lt;Math.PI*2; a+=0.4) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let r = l.r + Math.random()*25;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctxBg.lineTo(cx+Math.cos(a)*r, cy+Math.sin(a)*r);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxBg.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Dekorasyon</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxBg.font = "24px Arial"; ctxBg.textAlign="center";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0;i&lt;20;i++) ctxBg.fillText(Math.random()&gt;.5?"ğŸŒ²":"â›°ï¸", Math.random()*bgCanvas.width, Math.random()*bgCanvas.height);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function drawInitialAreas() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Sol Alt (P1)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.fillStyle = player1.color;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.beginPath(); ctxMap.arc(0, mapCanvas.height, 180, 0, Math.PI*2); ctxMap.fill();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// SaÄŸ Ãœst (P2)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.fillStyle = player2.color;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.beginPath(); ctxMap.arc(mapCanvas.width, 0, 180, 0, Math.PI*2); ctxMap.fill();</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- Ã‡Ä°ZÄ°M VE LÄ°MÄ°T HESAPLAMA ---</span></p>
<p class="p1"><span class="s1">function getMousePos(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const r = uiCanvas.getBoundingClientRect();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const cx = e.touches ? e.touches[0].clientX : e.clientX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const cy = e.touches ? e.touches[0].clientY : e.clientY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return { x: cx - r.left, y: cy - r.top };</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">uiCanvas.addEventListener('mousedown', startD); uiCanvas.addEventListener('mousemove', moveD); uiCanvas.addEventListener('mouseup', endD);</span></p>
<p class="p1"><span class="s1">uiCanvas.addEventListener('touchstart', startD, {passive:false}); uiCanvas.addEventListener('touchmove', moveD, {passive:false}); uiCanvas.addEventListener('touchend', endD);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function startD(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!gameState.started || gameState.canRoll || gameState.isRolling) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(e.type==='touchstart') e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const p = getMousePos(e);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const px = ctxMap.getImageData(p.x, p.y, 1, 1).data;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const isP1 = (gameState.turn === 'p1' &amp;&amp; px[0] &gt; px[2]); // KÄ±rmÄ±zÄ±</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const isP2 = (gameState.turn === 'p2' &amp;&amp; px[2] &gt; px[0]); // Mavi</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!isP1 &amp;&amp; !isP2) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.isDrawing = true; gameState.pathPoints = [p];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>playSound('draw');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.beginPath(); ctxUi.moveTo(p.x, p.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.strokeStyle = '#2d3436'; ctxUi.lineWidth = 3; ctxUi.setLineDash([5,5]);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function moveD(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!gameState.isDrawing) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(e.type==='touchmove') e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const p = getMousePos(e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.pathPoints.push(p);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Limit KontrolÃ¼ (Hata dÃ¼zeltildi: GerÃ§ek Piksel vs GerÃ§ek Piksel)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const currentDrawArea = calculatePolyArea(gameState.pathPoints);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const maxAllowed = gameState.scores[gameState.turn] * gameState.limitRatio;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const ratio = Math.min(100, (currentDrawArea / maxAllowed) * 100);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const barId = gameState.turn==='p1'?'p1LimitBar':'p2LimitBar';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const bar = document.getElementById(barId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>bar.style.width = ratio + '%';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// GÃ¶rsel Geri Bildirim</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if (currentDrawArea &gt; maxAllowed) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bar.style.background = '#e74c3c'; // KÄ±rmÄ±zÄ± (Hata)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxUi.strokeStyle = '#e74c3c';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(Math.random()&gt;0.9) playSound('limit');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bar.style.background = '#00b894'; // YeÅŸil (OK)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxUi.strokeStyle = '#2d3436';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.clearRect(0,0,uiCanvas.width, uiCanvas.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.beginPath(); ctxUi.moveTo(gameState.pathPoints[0].x, gameState.pathPoints[0].y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let pt of gameState.pathPoints) ctxUi.lineTo(pt.x, pt.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.stroke();</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function endD() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!gameState.isDrawing) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.isDrawing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.closePath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxUi.fillStyle = 'rgba(0,0,0,0.1)'; ctxUi.fill();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const area = calculatePolyArea(gameState.pathPoints);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const maxAllowed = gameState.scores[gameState.turn] * gameState.limitRatio;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Reset Bar</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p1LimitBar').style.width = '0%'; document.getElementById('p2LimitBar').style.width = '0%';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Validasyon</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(area &lt; 100) { ctxUi.clearRect(0,0,uiCanvas.width, uiCanvas.height); return; }</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(area &gt; maxAllowed) {<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>alert("SÄ±nÄ±rÄ± aÅŸtÄ±n! Sadece sahip olduÄŸun kadar alanÄ± riske edebilirsin.");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxUi.clearRect(0,0,uiCanvas.width, uiCanvas.height);<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>return;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.canRoll = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const btn = document.getElementById('rollBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>btn.classList.add('ready');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// GÃ¶stermelik birim (1000'e bÃ¶lerek sadeleÅŸtirdik)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>btn.innerHTML = `ğŸ² ZAR AT (Risk: ${Math.floor(area/100)})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>playSound('ready');</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- ZAR VE SONUÃ‡ ---</span></p>
<p class="p1"><span class="s1">document.getElementById('rollBtn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(!gameState.canRoll) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.isRolling = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('rollBtn').classList.remove('ready');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const target = Math.floor(Math.random()*6)+1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>animateDice(target);</span></p>
<p class="p1"><span class="s1">});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function animateDice(target) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const box = document.getElementById('gameDice');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let frame = 0; const duration = 120; // 2 sn</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let vx = 20, vy = 20; let rx = 0, ry = 0;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const loop = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>frame++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>vx *= 0.98; vy *= 0.98; rx += vx; ry += vy;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// Wobble Effect (Sonlara doÄŸru heyecan)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(frame &gt; duration - 30) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let tx=0, ty=0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==1) {tx=0; ty=0;} if(target==2) {tx=0; ty=180;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==3) {tx=0; ty=-90;} if(target==4) {tx=0; ty=90;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==5) {tx=-90; ty=0;} if(target==6) {tx=90; ty=0;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const w = Math.sin(frame)*15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box.style.transform = `rotateX(${tx+w+720}deg) rotateY(${ty+w+720}deg) scale(1.2)`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) scale(1.2)`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(frame%10===0) playSound('tick');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(frame &gt;= duration) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>clearInterval(loop);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>let tx=0, ty=0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==1) {tx=0; ty=0;} if(target==2) {tx=0; ty=180;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==3) {tx=0; ty=-90;} if(target==4) {tx=0; ty=90;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if(target==5) {tx=-90; ty=0;} if(target==6) {tx=90; ty=0;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>box.style.transform = `rotateX(${tx+720}deg) rotateY(${ty+720}deg) scale(1)`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>processResult(target);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}, 16);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function processResult(res) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const player = gameState.turn === 'p1' ? player1 : player2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const center = getCentroid(gameState.pathPoints);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const box = document.getElementById('lastResultBox');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let scale = 1, mode = 'source-over', msg = "", sound = "win", color = player.color;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// --- 1-6 MANTIÄI ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>switch(res) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 1: scale=1; mode='source-over'; msg="1ï¸âƒ£ TAM Ä°SABET! AlanÄ± kaptÄ±n."; sound='win'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 2: scale=1; mode='destination-out'; msg="2ï¸âƒ£ KAYIP! SeÃ§tiÄŸin yer silindi."; sound='lose'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 3: scale=1.41; mode='source-over'; msg="3ï¸âƒ£ 2 KAT KAZANÃ‡! Muazzam bÃ¼yÃ¼me!"; sound='winBig'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 4: scale=1.41; mode='destination-out'; msg="4ï¸âƒ£ 2 KAT KAYIP! BÃ¼yÃ¼k hasar!"; sound='loseBig'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 5: scale=0.7; mode='source-over'; msg="5ï¸âƒ£ YARIM KAZANÃ‡. Olsun, kÃ¢rdÄ±r."; sound='win'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>case 6: scale=0.7; mode='destination-out'; msg="6ï¸âƒ£ YARIM KAYIP. Ucuz atlattÄ±n."; sound='lose'; break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>playSound(sound);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>spawnParticles(center.x, center.y, mode==='source-over'?color:'#555', scale*20);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Canvas Ä°ÅŸlemi</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.save();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.translate(center.x, center.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.scale(scale, scale); // BÃ¼yÃ¼tme/KÃ¼Ã§Ã¼ltme burada yapÄ±lÄ±yor</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.translate(-center.x, -center.y);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.globalCompositeOperation = mode; // Silme veya Boyama</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.fillStyle = color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.moveTo(gameState.pathPoints[0].x, gameState.pathPoints[0].y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let p of gameState.pathPoints) ctxMap.lineTo(p.x, p.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.closePath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.fill();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.restore();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxMap.globalCompositeOperation = 'source-over';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// UI GÃ¼ncelle</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>box.innerHTML = `&lt;b&gt;${player.name} (${res}):&lt;/b&gt; ${msg}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>box.className = mode==='source-over'?'win':'lose';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxUi.clearRect(0,0,uiCanvas.width, uiCanvas.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>gameState.pathPoints = []; gameState.canRoll = false; gameState.isRolling = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('rollBtn').innerHTML = "Ã–NCE ALAN Ã‡Ä°Z ğŸ–Œï¸";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateScores(); switchTurn();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}, 1800);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- YARDIMCI ---</span></p>
<p class="p1"><span class="s1">function getCentroid(pts) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let x=0, y=0; for(let p of pts){x+=p.x; y+=p.y;}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return {x:x/pts.length, y:y/pts.length};</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function calculatePolyArea(pts) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let a=0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0; i&lt;pts.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let j=(i+1)%pts.length; a += pts[i].x*pts[j].y; a -= pts[j].x*pts[i].y;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>return Math.abs(a/2);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function updateScores() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Sadece oyun hazÄ±rken Ã§alÄ±ÅŸ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if (!gameState.readyToPlay &amp;&amp; gameState.scores.p1 &gt; 0) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// GerÃ§ek piksel sayÄ±mÄ± (Hassas Ã¶lÃ§Ã¼m)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const d = ctxMap.getImageData(0,0,mapCanvas.width, mapCanvas.height).data;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let s1=0, s2=0, step=64; // Ã–rnekleme hÄ±zÄ± (performans/doÄŸruluk dengesi)</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0; i&lt;d.length; i+=step) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(d[i+3]&gt;50) { if(d[i]&gt;d[i+2]) s1++; else s2++; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Piksel sayÄ±sÄ±nÄ± Ã¶rnekleme oranÄ±yla Ã§arpÄ±p gerÃ§ek alana yaklaÅŸtÄ±r</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// step = 64 (her 16 pikselden 1'i, rgba 4 byte olduÄŸu iÃ§in 64/4 = 16)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const realS1 = s1 * 16;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const realS2 = s2 * 16;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.scores.p1 = realS1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.scores.p2 = realS2;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p1Score').innerText = Math.floor(realS1/1000) + " br";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p2Score').innerText = Math.floor(realS2/1000) + " br";</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Bar</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const total = realS1 + realS2 + 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('barP1').style.width = (realS1/total)*100+"%";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('barP1').innerText = player1.name + " %" + Math.round((realS1/total)*100);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('barP2').style.width = (realS2/total)*100+"%";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('barP2').innerText = "%" + Math.round((realS2/total)*100) + " " + player2.name;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// Game Over</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(gameState.readyToPlay) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(realS1 &lt; 5000) { alert("ğŸ† " + player2.name + " KAZANDI!"); location.reload(); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if(realS2 &lt; 5000) { alert("ğŸ† " + player1.name + " KAZANDI!"); location.reload(); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function switchTurn() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>gameState.turn = gameState.turn === 'p1' ? 'p2' : 'p1';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>updateTurnIndicator();</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">function updateTurnIndicator() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const badge = document.getElementById('turnBadge');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p1Card').classList.remove('active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById('p2Card').classList.remove('active');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>if(gameState.turn === 'p1') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>badge.innerHTML = `SÄ±ra: ${player1.flag} ${player1.name}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>badge.style.background = player1.color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('p1Card').classList.add('active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>badge.innerHTML = `SÄ±ra: ${player2.flag} ${player2.name}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>badge.style.background = player2.color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('p2Card').classList.add('active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">// --- EFEKTLER ---</span></p>
<p class="p1"><span class="s1">let particles = [];</span></p>
<p class="p1"><span class="s1">function spawnParticles(x,y,c, count=20) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>for(let i=0;i&lt;count;i++) particles.push({x:x,y:y,vx:(Math.random()-.5)*15,vy:(Math.random()-.5)*15,life:1,c:c});</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">function loopFx() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>ctxFx.clearRect(0,0,fxCanvas.width,fxCanvas.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>particles.forEach(p=&gt;{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>p.x+=p.vx; p.y+=p.vy; p.life-=0.04;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxFx.globalAlpha=p.life; ctxFx.fillStyle=p.c;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctxFx.beginPath(); ctxFx.arc(p.x,p.y,4,0,Math.PI*2); ctxFx.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>particles=particles.filter(p=&gt;p.life&gt;0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>requestAnimationFrame(loopFx);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">loopFx();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
